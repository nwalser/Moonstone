@page "/"

<PageTitle>Projects</PageTitle>

<FluentStack HorizontalAlignment="HorizontalAlignment.Center" VerticalAlignment="VerticalAlignment.Top" Class="h-full p-8">
    <FluentStack Width="800px" Orientation="Orientation.Vertical">
        <FluentStack Orientation="Orientation.Horizontal" VerticalAlignment="VerticalAlignment.Center">
            <FluentLabel Typo="Typography.PaneHeader" Class="flex-shrink-0">Projects</FluentLabel>
            <FluentStack Orientation="Orientation.Horizontal" HorizontalAlignment="HorizontalAlignment.End">
                <FluentButton OnClick="() => CreateProject()">Create</FluentButton>
            </FluentStack>
        </FluentStack>

        <FluentStack Orientation="Orientation.Vertical" VerticalGap="4">
            @foreach (var project in Database.Enumerate<ProjectAggregate>())
            {
                <FluentCard MinimalStyle="true">
                    <FluentStack Orientation="Orientation.Horizontal" VerticalAlignment="VerticalAlignment.Center">
                        <FluentStack Orientation="Orientation.Vertical" VerticalGap="0">
                            <FluentLabel Typo="Typography.Subject" Class="truncate">@project.Name</FluentLabel>
                            <FluentLabel Typo="Typography.Body" Class="truncate">@project.Description @project.Deadline @project.Id</FluentLabel>
                        </FluentStack>
                        <FluentStack Orientation="Orientation.Horizontal" HorizontalAlignment="HorizontalAlignment.End">
                            <FluentButton OnClick="() => ViewProject(project.Id)">View</FluentButton>
                        </FluentStack>
                    </FluentStack>
                </FluentCard>
            }
        </FluentStack>
    </FluentStack>
</FluentStack>

@code {
    [CascadingParameter] public required ProjectDatabase Database { get; set; }
    
    [Inject] public required NavigationManager NavigationManager { get; set; }

    private void CreateProject()
    {
        
    }

    private void ViewProject(Guid id)
    {
        NavigationManager.NavigateTo($"/project/{id}");
    }
}